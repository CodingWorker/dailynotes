<!DOCTYPE html>
<html>
<head>
	<title>娴璇</title>
</head>
<body>


<script>
var arr= [
        {name: 'root', 'hasSub': false},

        {name: 'scroll', 'hasSub': false},
        {name: '001', 'hasSub': false},
        {name: '002', 'hasSub': false},
        {name: '003', 'hasSub': false},
        {name: '004', 'hasSub': false},
        {name: 'subTitle', 'hasSub': false},
        {name: '005', 'hasSub': false},
        {name: '006', 'hasSub': false},
        {name: '007', 'hasSub': false},
        {name: '008', 'hasSub': false},
        {name: '009', 'hasSub': false}

	]

//方法：
var newArr=[];

while(true){
	var temp=arr.shift();
	if (/\d/.test(temp['name'])) {
		if(typeof(newArr[newArr.length-1].children)=='undefined'){
			
			newArr[newArr.length]={
				name:1,
				hasSub:true,
				children:[]
			}
		}

		(newArr[newArr.length-1].children).push(temp);
	}else{
		newArr.push(temp);
	}

	if(arr.length==0){
		break;
	}
}



/*
   方法一：
var newArr=[];
while(arr.length>0){
	if(/\d/.test(arr[0].name)){

		if(typeof(newArr[newArr.length-1].children) == 'undefined'){
			var temp={
				name:arr[0].name,
				hasSub:true,
				children:[]
			};
			
			newArr.push(temp);
		}

		newArr[newArr.length-1].children.push(arr.shift());
	}else{
		if(newArr.length!=0 && typeof(newArr[newArr.length-1].children) != 'undefined'){
			newArr[newArr.length-1].name=newArr[newArr.length-1].name+'-'+newArr[newArr.length-1].children[newArr[newArr.length-1].children.length-1].name;
		}

		newArr.push(arr.shift());
	}

	if( arr.length==0 && typeof(newArr[newArr.length-1].children) != 'undefined'){
		newArr[newArr.length-1].name=newArr[newArr.length-1].name+'-'+newArr[newArr.length-1].children[newArr[newArr.length-1].children.length-1].name;
	}
}

console.log(newArr);

/*
var temp=[];
for (var i = 0; i < arr.length; i++) {
	var anchor = arr[i];

	if (/\d/.test(anchor['name'])) {
	    temp.push(anchor);
	}
	else{
		if (temp.length>0) {
			var children={};
			children.name=temp[0]['name'] +'-'+ temp[temp.length - 1]['name'];
			children.hasSub=true;
			children.children=[];
			for(var j=0;j<temp.length;j++){
				children.children.push(temp[j]);
			}
			newArr.push(children);
			
			temp.length = 0;
		}
	    
	    newArr.push(anchor);
	}
}
if (temp.length>0) {
	var children={};
	children.name=temp[0]['name'] +'-'+ temp[temp.length - 1]['name'];
	children.hasSub=true;
	children.children=[];
	for(var j=0;j<temp.length;j++){
		children.children.push(temp[j]);
	}
	newArr.push(children);
}
*/
console.log(newArr);
</script>
</body>
</html>
